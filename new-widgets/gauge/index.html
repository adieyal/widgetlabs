<!doctype HTML>
<html>
  <head>
    <title>Widgets - Gauge Demo</title>
    <script type="text/javascript" data-main="../js/widgets" src="../js/require.js"></script>
    <style>
      #gauge-demo {
        width: 400px;
        height: 200px;
        border: 1px solid lightgray;
        border-radius: 5px;
      }
    </style>
  </head>
  <body>
    <p>Sample dataset:</p>
    <pre id="slider-data">
[ { &quot;position&quot;: 0.5,
    &quot;text&quot;: &quot;Planned&quot;,
    &quot;needle-style&quot;: &quot;dashed&quot;,
    &quot;marker-style&quot;: &quot;plain&quot;
  },
  { &quot;position&quot;: 0.85,
    &quot;text&quot;: &quot;Planned&quot;,
    &quot;needle-color&quot;: [&quot;#86bf53&quot;, &quot;#cce310&quot;],
    &quot;needle-style&quot;: &quot;plain&quot;,
    &quot;marker-style&quot;: &quot;plain&quot;
  }
]
    </pre>
    <form id="gauge-settings">
      <pre>
[ { &quot;position&quot;:	&quot;<input type="text" id="needle1-position" value="0.5"/>&quot;,<br/>
    &quot;text&quot;: &quot;<input type="text" id="needle1-text" value="Planned"/>&quot;,<br/>
    &quot;needle-style&quot;: &quot;<select id="needle1-style"><option value="plain">plain</option><option value="dashed" selected="selected">dashed</option><option value="none">none</option></select>&quot;,<br/>
    &quot;marker-style&quot;: &quot;<select id="marker1-style"><option value="plain" selected="selected">plain</option><option value="none">none</option></select>&quot;,<br/>
    &quot;needle-color&quot;: [&quot;<input type="text" id="needle1-color1" value=""/>&quot;, &quot;<input type="text" id="needle1-color2" value=""/>&quot;],
  },
  { &quot;position&quot;:	&quot;<input type="text" id="needle2-position" value="0.85"/>&quot;,<br/>
    &quot;text&quot;: &quot;<input type="text" id="needle2-text" value="Actual"/>&quot;,<br/>
    &quot;style&quot;: &quot;<select id="needle2-style"><option value="plain" selected="selected">plain</option><option value="dashed">dashed</option><option value="none">none</option></select>&quot;,<br/>
    &quot;marker-style&quot;: &quot;<select id="marker2-style"><option value="plain" selected="selected">plain</option><option value="none">none</option></select>&quot;,<br/>
    &quot;color&quot;: [&quot;<input type="text" id="needle2-color1" value="#86bf53"/>&quot;, &quot;<input type="text" id="needle2-color2" value="#cce310"/>&quot;],
  }
]
      </pre>
    </form>
    <div id="gauge-demo" data-widget="gauge" data-src="demo.json"></div>
    <script>
      require(['jquery'], function($) {
	  var f = $('#gauge-settings');
	  
	  f.on('change', function() {
	      var f = $('#gauge-settings');
	      var w = $('#gauge-demo').data('widget-instance');
	      var d = [];
	      var n;
	      
	      n = {}
	      if (f.find('#needle1-position').val()) { n['position'] = f.find('#needle1-position').val(); }
	      if (f.find('#needle1-text').val()) { n['text'] = f.find('#needle1-text').val(); }
	      if (f.find('#needle1-style').val()) { n['needle-style'] = f.find('#needle1-style').val(); }
	      if (f.find('#marker1-style').val()) { n['marker-style'] = f.find('#marker1-style').val(); }
	      if (f.find('#needle1-color1').val() || f.find('#needle1-color2').val()) { n['needle-color'] = [f.find('#needle1-color1').val(), f.find('#needle1-color2').val()]; }
	      d.push(n);
	      
	      n = {}
	      if (f.find('#needle2-position').val()) { n['position'] = f.find('#needle2-position').val(); }
	      if (f.find('#needle2-text').val()) { n['text'] = f.find('#needle2-text').val(); }
	      if (f.find('#needle2-style').val()) { n['needle-style'] = f.find('#needle2-style').val(); }
	      if (f.find('#marker2-style').val()) { n['marker-style'] = f.find('#marker2-style').val(); }
	      if (f.find('#needle2-color1').val() || f.find('#needle2-color2').val()) { n['needle-color'] = [f.find('#needle2-color1').val(), f.find('#needle2-color2').val()]; }
	      d.push(n);

	      w.data = d;
	      w.draw();
	  });
      });
    </script>
  </body>
</html>
